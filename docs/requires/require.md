# 東京都市大学 第97回 世田谷祭 Webサイト要件定義書

## 1. プロジェクト概要

### 1.1 基本情報

| 項目           | 内容                                       |
| -------------- | ------------------------------------------ |
| プロジェクト名 | 東京都市大学 第97回 世田谷祭 公式Webサイト |
| 開催日程       | 2026年10月31日（土）〜 11月1日（日）       |
| 開催時間       | 全日                                       |
| 開催場所       | 東京都市大学 世田谷キャンパス              |
| 想定来場者数   | 約3,000名（学生、教職員、地域住民）        |
| サイト公開日   | 2026年2月28日                              |
| 開発期間       | 約3ヶ月（2025年12月〜2026年2月）           |

### 1.2 プロジェクト目的

- 来場者に学園祭の情報をわかりやすく提供する
- 企画の検索・発見を容易にし、来場者体験を向上させる
- 3Dマップによる直感的な会場案内を実現する
- 多言語対応により、留学生・外国人来場者にも情報を提供する

### 1.3 チーム

| 役割                   | 名前                             | 連絡先                |
| ---------------------- | -------------------------------- | --------------------- |
| デザイン・開発・テスト | 山下マナト（メディア情報学部卒） | mail@yamashitamana.to |
| 実行委員 広報部長      | いちみゆり（人間科学部）         | LINE                  |
| 実行委員 web担当長     | おきやまみう（人間科学部）       | LINE                  |

---

## 2. 技術要件

### 2.1 技術スタック

| カテゴリ         | 技術                                 |
| ---------------- | ------------------------------------ |
| フレームワーク   | Next.js 16.1 (App Router)            |
| 言語             | TypeScript                           |
| スタイリング     | TailwindCSS                          |
| アニメーション   | GSAP                                 |
| 3Dグラフィックス | Three.js / React Three Fiber（予定） |
| CMS              | microCMS                             |
| 多言語対応       | next-intl または next-i18next        |
| ホスティング     | Vercel (Free Plan)                   |

### 2.2 デザイン仕様

| 項目             | 内容                      |
| ---------------- | ------------------------- |
| テーマカラー     | `#CD79EE`（紫）           |
| レスポンシブ対応 | モバイルファースト設計    |
| 参考サイト       | https://sumitomoexpo.com/ |

### 2.3 開発方針

- **コンテンツ分離**: 全ての画像パス、テキストコンテンツはUIコンポーネントと分離し、JSON/TSファイルで管理
- **保守性重視**: 運用フェーズでの更新を容易にする設計
- **パフォーマンス**: Vercel Free Planの制約を考慮した最適化

---

## 3. microCMS API設計

### 3.1 API一覧（最大5API中3API使用）

| API名        | 用途                 | 優先度 |
| ------------ | -------------------- | ------ |
| news         | お知らせ・ニュース   | 必須   |
| events       | 企画情報             | 必須   |
| informations | 協賛企業等の汎用情報 | 必須   |
| （予備1）    | 将来拡張用           | -      |
| （予備2）    | 将来拡張用           | -      |

### 3.2 News API スキーマ

```typescript
interface News {
  id: string; // 自動生成(slugに利用)
  createdAt: string; // 自動生成（ISO 8601）
  updatedAt: string; // 自動生成（ISO 8601）
  type: "urgent" | "news" | "other"; // セレクトフィールド
  title: string; // テキストフィールド
  thumbnail?: MicroCMSImage; // 画像フィールド（任意）
  description: string; // テキストエリア（概要）
  content: string; // リッチエディタ（Markdown/HTML）
}
```

**typeの選択肢:**

- `urgent`: 緊急・重要なお知らせ
- `news`: 通常のお知らせ
- `other`: その他

### 3.3 Events API スキーマ

```typescript
interface Event {
  id: string; // 自動生成(slugに利用)
  createdAt: string; // 自動生成
  updatedAt: string; // 自動生成
  date: "day1" | "day2" | "both" | "other"; // セレクト: 1日目/2日目/両日/その他
  type: "room" | "stage" | "special";
  other; // セレクト: 教室企画/ステージ企画/スペシャル/その他
  place: string; // テキスト（例: "7号館 3F 301"）
  building?: string; // テキスト（3Dマップ連携用、例: "7"）
  title: string; // テキストフィールド
  organizer: string; // テキスト（所属団体・サークル名）
  thumbnail?: MicroCMSImage; // 画像フィールド（任意）
  description: string; // テキストエリア（概要）
  content: string; // リッチエディタ（詳細説明）
  startTime?: string; // テキスト（開始時刻、ステージ企画用）
  endTime?: string; // テキスト（終了時刻、ステージ企画用）
  sns?: {
    // カスタムフィールド（任意）
    twitter?: string;
    instagram?: string;
    website?: string;
  };
}
```

**date の選択肢:**

- `day1`: 10月31日（土）のみ
- `day2`: 11月1日（日）のみ
- `both`: 両日開催
- `other`: その他・未定

**type の選択肢:**

- `room`: 教室企画
- `stage`: ステージ企画
- `special`: スペシャル企画（有名人ゲスト等）
- `other`: その他

### 3.4 Informations API スキーマ

```typescript
interface Information {
  id: string;
  createdAt: string;
  updatedAt: string;
  category: "sponsor" | "faq" | "other"; // カテゴリ分類（今後拡張される可能性あり）
  title: string;
  // Sponsor用フィールド
  spnonsorName: string; // 企業名（協賛企業用）
  sponsorDescription?: string; // 企業説明（協賛企業用）
  logo?: MicroCMSImage;
  url?: string; // 企業サイトURL（任意）
  priority?: number; // 表示順（任意）
}
```

---

## 4. サイト構成・機能要件

### 4.1 ページ構成

```
/                           # トップページ (HOME)
├── /events                 # 企画を探す
│   ├── /                   # 企画検索・一覧
│   └── /[id]               # 企画詳細 [動的生成]
├── /timetable              # タイムテーブル
├── /map                    # マップ・アクセス
│   ├── /                   # 3Dキャンパスマップ
│   └── /access             # 交通アクセス
├── /info                   # インフォメーション
│   ├── /                   # お知らせ一覧
│   ├── /[id]               # お知らせ詳細 [動的生成]
│   ├── /guide              # ご来場の方へ
│   ├── /faq                # よくある質問
│   └── /pamphlet           # パンフレットDL
├── /about                  # 委員会・その他
│   ├── /                   # 委員長挨拶・理念
│   ├── /sponsors           # 協賛企業一覧
│   ├── /contact            # お問い合わせ
│   └── /privacy            # プライバシーポリシー
└── /[locale]               # 多言語ページ (en, zh, ko)
```

### 4.2 トップページ (HOME)

#### 4.2.1 起動時アニメーション

| 項目     | 仕様                                 |
| -------- | ------------------------------------ |
| 形式     | WebM動画（ロゴアニメーション）       |
| 表示条件 | 初回訪問時のみ（sessionStorage管理） |
| 演出     | ロゴフェードイン                     |
| スキップ | 3秒以上の場合はスキップボタン表示    |
| 実装     | `<video>` タグ + GSAP制御            |

#### 4.2.2 カウントダウン

| 状態   | 表示内容                                   |
| ------ | ------------------------------------------ |
| 開催前 | 開催日までのカウントダウン（日:時:分:秒）  |
| 開催中 | 「開催中！」バナー表示                     |
| 終了後 | 「ご来場ありがとうございました」メッセージ |

#### 4.2.3 その他セクション

- メインビジュアル
- 開催概要・テーマ
- News（最新3件程度のピックアップ）
- おすすめ企画 / 特集
- 協賛バナーエリア（ロゴスライダー）
- Footer（SNSリンク、サイトマップ）

### 4.3 企画を探す (/events)

#### 4.3.1 検索・絞り込み機能

| フィルター | タイプ                    | 選択肢                                      |
| ---------- | ------------------------- | ------------------------------------------- |
| 日程       | チェックボックス          | Day1 / Day2 / 両日                          |
| 場所       | セレクト/チェックボックス | 建物番号（1号館〜10号館）、体育館、ホール等 |
| カテゴリ   | チェックボックス          | 教室企画 / ステージ企画 / スペシャル        |
| キーワード | テキスト入力              | タイトル・説明文を対象に検索                |

#### 4.3.2 企画一覧

- カード形式での表示
- サムネイル、タイトル、カテゴリバッジ、場所、日程を表示
- ページネーションまたは無限スクロール

#### 4.3.3 企画詳細ページ

- 企画名、サムネイル画像
- 所属団体名
- 開催日時・場所
- 詳細説明（Markdown/HTML）
- SNSリンク（任意）
- 「マップで見る」ボタン（3Dマップへの遷移）

### 4.4 タイムテーブル (/timetable)

#### 4.4.1 表示仕様

| 項目             | 仕様                                               |
| ---------------- | -------------------------------------------------- |
| 形式             | 縦型ガントチャート（縦軸: 時間、横軸: ステージ）   |
| 日程切替         | Day1 / Day2 タブ                                   |
| ステージ切替     | ステージごとのタブ（7A, 7B, 体育館, ホール等）     |
| インタラクション | イベントクリックで詳細モーダル or 詳細ページへ遷移 |

#### 4.4.2 対象ステージ（暫定）

- 7A（7号館A）
- 7B（7号館B）
- 体育館
- ホール
- （追加の可能性あり）

### 4.5 マップ・アクセス (/map)

#### 4.5.1 3Dキャンパスマップ

| 項目             | 仕様                                             |
| ---------------- | ------------------------------------------------ |
| 実装技術         | Three.js / React Three Fiber                     |
| 3Dモデル         | 自作（開発チームで作成）                         |
| 建物数           | 約10棟（1号館〜10号館）                          |
| インタラクション | 建物クリックで企画ピン表示                       |
| ピン情報         | Events APIのplace/buildingフィールドから自動生成 |

**クリック後の動作:**

1. 建物をクリック
2. その建物内の企画一覧をオーバーレイ/サイドパネルで表示
3. 企画クリックで詳細ページへ遷移

#### 4.5.2 施設案内

- トイレ位置
- 案内所
- 休憩所
- （静的データとしてJSON管理）

#### 4.5.3 交通アクセス (/map/access)

- 最寄り駅からのルート案内
- Google Maps埋め込み or 静的マップ画像
- 駐車場・駐輪場情報

### 4.6 インフォメーション (/info)

#### 4.6.1 お知らせ一覧・詳細

- News APIから取得
- 緊急度（urgent）によるハイライト表示
- 詳細ページは動的生成

#### 4.6.2 ご来場の方へ (/info/guide)

- 注意事項（飲酒・喫煙・ゴミ捨て等）
- バリアフリー情報
- 静的コンテンツ（JSON/TS管理）

#### 4.6.3 FAQ (/info/faq)

- Informations APIから取得（category: 'faq'）
- アコーディオン形式での表示

#### 4.6.4 パンフレット (/info/pamphlet)

- PDFダウンロードリンク
- ページ内プレビュー（任意）

### 4.7 委員会・その他 (/about)

#### 4.7.1 委員長挨拶・理念

- 静的コンテンツ
- 委員長写真、メッセージ

#### 4.7.2 協賛企業一覧 (/about/sponsors)

- Informations APIから取得（category: 'sponsor'）
- ロゴ表示、リンク付き（任意）
- 約30社想定

#### 4.7.3 お問い合わせフォーム (/about/contact)

**フォーム種別（タブまたはセレクト切替）:**

1. 一般・来場者向け
2. 取材・メディア向け
3. 落とし物のお問い合わせ

**送信方法:**

- メール送信（Nodemailer + Vercel Serverless Functions）
- またはフォームサービス（Formspree等）をバックアップとして検討

**フォーム項目（一般）:**

- 氏名（必須）
- メールアドレス（必須）
- 問い合わせ種別（必須）
- 件名（必須）
- 内容（必須）

#### 4.7.4 プライバシーポリシー (/about/privacy)

- 静的コンテンツ

---

## 5. 多言語対応

### 5.1 対応言語

| 言語           | コード | 対応範囲               |
| -------------- | ------ | ---------------------- |
| 日本語         | ja     | 全ページ（デフォルト） |
| English        | en     | 固定ページ             |
| 中文（簡体字） | zh     | 固定ページ             |
| 한국어         | ko     | 固定ページ             |

### 5.2 実装方針

- **固定ページ**: next-intl または next-i18next を使用し、翻訳ファイル（JSON）で管理
- **CMSコンテンツ**: 日本語のみ（将来的な多言語対応は検討）
- **言語切替UI**: ヘッダーにドロップダウンまたはアイコンボタン

### 5.3 翻訳ファイル構成

```
/messages
├── ja.json
├── en.json
├── zh.json
└── ko.json
```

---

## 6. 静的コンテンツ管理

### 6.1 ディレクトリ構成

```
/src
├── /data
│   ├── site.ts           # サイト基本情報（タイトル、開催日等）
│   ├── navigation.ts     # ナビゲーション構成
│   ├── buildings.ts      # 建物情報（3Dマップ用）
│   ├── facilities.ts     # 施設情報（トイレ、案内所等）
│   ├── access.ts         # アクセス情報
│   ├── guide.ts          # ご来場の方へ（注意事項等）
│   └── privacy.ts        # プライバシーポリシー
├── /messages             # 多言語翻訳ファイル
└── /assets
    ├── /images           # 静的画像
    └── /videos           # ロゴアニメーション等
```

### 6.2 型定義例

```typescript
// /src/data/site.ts
export const siteConfig = {
  name: "東京都市大学 第97回 世田谷祭",
  shortName: "世田谷祭",
  dates: {
    day1: "2026-10-31",
    day2: "2026-11-01",
  },
  openTime: "10:00",
  closeTime: "18:00",
  venue: "東京都市大学 世田谷キャンパス",
  themeColor: "#CD79EE",
  sns: {
    twitter: "https://twitter.com/xxxxx",
    instagram: "https://instagram.com/xxxxx",
  },
} as const;
```

### 6.3 年次更新対応（第98回以降の使い回し設計）

本プロジェクトは、第97回のWebサイトとして開発されますが、来年（第98回）以降も**ロジックとレイアウトを使い回す**前提で設計されています。

#### 年次更新の基本方針

- **ロジック・デザインは不変**: UIコンポーネント、ページ構成、機能ロジックは原則として変更しない
- **コンテンツのみ差し替え**: 年度情報、画像パス、テキストのみを更新
- **一元管理**: 年度情報は `/src/data/site.ts` で一元管理し、他のファイルで参照

#### 年次更新時に更新すべきファイル

1. **`/src/data/site.ts`** - サイト基本情報（年度、開催日、テーマカラー等）
2. **`/src/data/navigation.ts`** - 必要に応じてメニュー項目を調整
3. **`/src/data/buildings.ts`** - 建物情報（変更がある場合のみ）
4. **`/src/data/facilities.ts`** - 施設情報（変更がある場合のみ）
5. **`/src/data/access.ts`** - アクセス情報（変更がある場合のみ）
6. **`/src/data/guide.ts`** - 注意事項等（変更がある場合のみ）
7. **`/src/assets/images/`** - 画像ファイルの差し替え
8. **`/src/assets/videos/`** - 動画ファイルの差し替え
9. **microCMS** - News, Events, Informations APIのコンテンツを削除・再投稿

#### 年度情報の一元管理

`/src/data/site.ts` で年度情報を一元管理し、他のファイルやコンポーネントで参照：

```typescript
// /src/data/site.ts
export const siteConfig = {
  edition: 97, // 第X回
  name: `東京都市大学 第${97}回 世田谷祭`,
  shortName: "世田谷祭",
  dates: {
    day1: "2026-10-31",
    day2: "2026-11-01",
  },
  // ...
} as const;
```

**年次更新時**: `edition` と `dates` のみを変更すれば、他のコンポーネントで自動的に反映される設計とする。

#### 年次更新のチェックリスト

- [ ] `/src/data/site.ts` の `edition` と `dates` を更新
- [ ] `/src/assets/images/` の画像を差し替え
- [ ] `/src/assets/videos/` の動画を差し替え
- [ ] microCMS の過去データを削除（または非公開化）
- [ ] microCMS に新年度のデータを投稿
- [ ] ビルド・デプロイして動作確認

---

## 7. 非機能要件

### 7.1 パフォーマンス

| 項目                   | 目標値    |
| ---------------------- | --------- |
| Lighthouse Performance | 90以上    |
| First Contentful Paint | 1.5秒以下 |
| Time to Interactive    | 3秒以下   |

### 7.2 SEO対策

- 各ページにメタタグ設定（title, description, OGP）
- 構造化データ（JSON-LD）でイベント情報をマークアップ
- sitemap.xml 自動生成
- robots.txt 設置

### 7.3 アクセシビリティ

- WAI-ARIA対応
- キーボードナビゲーション対応
- カラーコントラスト比の確保

### 7.4 ブラウザ対応

| ブラウザ       | バージョン      |
| -------------- | --------------- |
| Chrome         | 最新2バージョン |
| Safari         | 最新2バージョン |
| Firefox        | 最新2バージョン |
| Edge           | 最新2バージョン |
| iOS Safari     | iOS 15以上      |
| Android Chrome | 最新            |

### 7.5 Vercel Free Plan 制約

| 項目                        | 制限     |
| --------------------------- | -------- |
| Bandwidth                   | 100GB/月 |
| Serverless Function実行時間 | 10秒     |
| ビルド時間                  | 45分     |

---

## 8. 開発スケジュール（案）

### Phase 1: 基盤構築（12月）

- [ ] プロジェクトセットアップ（Next.js, TailwindCSS, TypeScript）
- [ ] microCMS API設計・構築
- [ ] 基本レイアウト（Header, Footer, Navigation）
- [ ] 静的コンテンツ構成
- [ ] 多言語対応基盤

### Phase 2: 主要機能実装（1月前半）

- [ ] トップページ（カウントダウン、各セクション）
- [ ] 起動時アニメーション
- [ ] 企画一覧・詳細ページ
- [ ] 検索・絞り込み機能
- [ ] タイムテーブル

### Phase 3: マップ・その他（1月後半）

- [ ] 3Dマップ実装
- [ ] アクセスページ
- [ ] インフォメーション各ページ
- [ ] お問い合わせフォーム

### Phase 4: 仕上げ・テスト（2月）

- [ ] About各ページ
- [ ] 多言語翻訳入力
- [ ] レスポンシブ調整
- [ ] パフォーマンス最適化
- [ ] クロスブラウザテスト
- [ ] 本番デプロイ・最終確認

---

## 9. 成果物一覧

| 成果物           | 形式              |
| ---------------- | ----------------- |
| 要件定義書       | Markdown/PDF      |
| ワイヤーフレーム | Figma（別途作成） |
| デザインカンプ   | Figma（別途作成） |
| ソースコード     | GitHub リポジトリ |
| 運用マニュアル   | Markdown          |

---

## 10. 備考・検討事項

### 10.1 未確定事項

- [ ] 3Dモデル作成ツール（Blender等）
- [ ] ロゴアニメーション素材の納品時期
- [ ] 各企画の情報

### 10.2 リスク・課題

| リスク               | 対策                                               |
| -------------------- | -------------------------------------------------- |
| 3Dマップの実装難易度 | 優先度を下げ、2Dマップをフォールバックとして用意   |
| コンテンツ入稿の遅延 | ダミーデータで開発を進行、入稿スケジュールを明確化 |
| Vercel Free Plan制約 | ISR/SSGを活用し、サーバーレス関数の使用を最小化    |

---

## 改訂履歴

| バージョン | 日付       | 内容     |
| ---------- | ---------- | -------- |
| 1.0        | 2025-01-13 | 初版作成 |

---

**作成者:** 山下マナト（yamashitamana.to）
**承認者:** 東京都市大学 第97回 世田谷祭 実行委員会
